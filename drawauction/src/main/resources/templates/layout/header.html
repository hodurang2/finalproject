<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!--/*
  <head> 태그를 조각(fragment)으로 만든다.
  1. 조각이름 : head
  2. 파라미터 : title
*/-->
<head th:fragment="head(title)">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
  <th:block th:if="${#strings.isEmpty(title)}">마이홈</th:block>
  <th:block th:if="${not #strings.isEmpty(title)}" th:text="${title}"></th:block>
</title>
<!--/*
  Link URL Expression
  1. 경로 작성식
  2. @{}
*/-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<link rel="stylesheet" th:href="@{/css/init.css(ver=1.1)}" />
<link rel="stylesheet" th:href="@{/css/header.css(ver=1.0)}" />
<link rel="stylesheet" th:href="@{/css/main.css(ver=1.0)}" />
<link rel="stylesheet" th:href="@{/css/footer.css(ver=1.0)}" />
<link rel="stylesheet" th:href="@{/css/paging.css(ver=1.0)}" />
<link rel="stylesheet" th:href="@{/css/common.css(ver=1.0)}" />
<link rel="stylesheet" th:href="@{/css/ckeditor.css(ver=1.0)}" />
<link rel="stylesheet" th:href="@{/css/menu.css(ver=1.0)}" />
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.ckeditor.com/ckeditor5/40.0.0/decoupled-document/ckeditor.js"></script>
</head>

<body>

  <div th:fragment="header" class="header_wrap">

    
    <script>
      const fnMain = () => {
        $('.logo').click(() => {
          location.href = '/main.do';
        })
      }
      fnMain();
    </script>
    
    <div  style="background-color:  #F6F6F6;">
		 <div class="wrap">
		   <div class="login_wrap">
      <th:block th:if="${session.user == null}">
        <ul class="ico_user_group">

          <li><a th:href="@{/user/login.form}">로그인</a></li>
          <li>│</li>
          <li><a th:href="@{/user/agree.form}">회원가입</a></li>
          <li>│</li>
          <li><a th:href="@{/notice/list.do}"> 고객센터</a></li>
        </ul>
      </th:block>
      <th:block th:if="${session.user != null}">
        <ul class="ico_user_group">
			<li>
			  <a th:href="@{/mypage/detail.do}">
			    <span th:text="|${session.user.name}|"></span> 님 환영합니다
			  </a>
			</li>
          <li>│</li>
          <li>
           <a th:href="@{/user/logout.do}"> 로그아웃</a>
           <li>│</li>
           <a th:href="@{/notice/list.do}"> 고객센터</a>  
          </li>
        </ul>
      </th:block>
    </div>
	</div>
	</div>
  
<div class="wrap">
<div class="header_menu">
    <div class="logo"><a th:href="@{/main.do}"><img th:src="@{../../image/한글로고.png}" width="250px"></a></div>
    <div>
		<li><i class="fas fa-regular fa-user mypage_event" id="mypage" style="cursor: pointer;"></i></li>
		<li><i id="btn-modal" class="fas fa-regular fa-bell mypage_event" style="cursor: pointer;"></i></li>
		<li><i class="fas fa-regular fa-comments mypage_event" style="cursor: pointer;"></i></li>

    
    </div>
</div>
</div>

<div id="container"></div>
<div id="modal" class="modal-overlay">
    <div class="modal-window">
        <div class="title">
            <h2>모달</h2>
        </div>
        <div class="close-area">X</div>
        <div class="content">
            <p>가나다라마바사 아자차카타파하</p>
            <p>가나다라마바사 아자차카타파하</p>
            <p>가나다라마바사 아자차카타파하</p>
            <p>가나다라마바사 아자차카타파하</p>
        </div>
    </div>
</div>

	<!--아이콘-->
	<script th:inline="javascript">
    const fnIconsClickEvent = () => {
        $(document).on('click', '.mypage_event', function(event) {
            let user = /*[[${session.user}]]*/ null;
            if (user === null) {
                if (confirm('로그인이 필요한 기능입니다. 로그인하시겠습니까?')) {
                    location.href = '/user/login.form';
                }

                event.preventDefault();
                return;
            }
        });
    };

	const fnMyPage = () => {
		$(document).on('click', '#mypage', function(event) {
            let user = /*[[${session.user}]]*/ null;
            if (user != null) {
				location.href = '/mypage/detail.do';
            }
            
               event.preventDefault();
                return;
        });
    };
    
    const modal = document.getElementById("modal")
	function modalOn() {
	    modal.style.display = "flex"
	}
	function isModalOn() {
	    return modal.style.display === "flex"
	}
	function modalOff() {
	    modal.style.display = "none"
	}
	const btnModal = document.getElementById("btn-modal")
	btnModal.addEventListener("click", e => {
	    modalOn()
	})
	const closeBtn = modal.querySelector(".close-area")
	closeBtn.addEventListener("click", e => {
	    modalOff()
	})
	modal.addEventListener("click", e => {
	    const evTarget = e.target
	    if(evTarget.classList.contains("modal-overlay")) {
	        modalOff()
	    }
	})
	window.addEventListener("keyup", e => {
	    if(isModalOn() && e.key === "Escape") {
	        modalOff()
	    }
	})

	modalOn();
	isModalOn();
	modalOff();
    fnIconsClickEvent(); // 함수 호출
    fnMyPage();
</script>

    
    
	<div class="border">
   <div class="wrap">
	       <!--/* 메뉴들. */-->
		    <div class="gnb_wrap">
      <ul class="gnb">
        <li><a th:href="@{/auction/}">경매</a></li>
        <li>│</li>
        <li><a th:href="@{/draw/list.do}">그려드림</a></li>
        
      </ul>
	</div>
	   
	</div>
	   
   </div> 

    
    


    
  </div>
		
	</div>



 
  
</body>
</html>